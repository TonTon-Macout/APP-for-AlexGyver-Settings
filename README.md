
# Remote Settings Management

### Виндовс приложение для поиска и отображения вебморды устройств
+ с установленной библиотекой [Settings AlexGyver](https://github.com/GyverLibs/Settings) 
+ с установленным [WLED](https://github.com/wled/WLED?ysclid=m7q4g9kdu7478403852)
+ Home Assistant
+ и вебморд устройств добавленных вручную, в.т.ч. и с доступом из сети интернет </br></br>

Программа написанна на Python, exe можно собрать самому из скрипта, [инструкция ниже ↓](#compiler)<br> 
Или скачать zip-архив с скомпилированным exe и иконками, [последняя версия  ↓](#relise)<br><br>
Для запуска exe файла установка не требуется, поместите его в удобную вам папку и пользуйтесь<br> <br>
При обновлении можно просто заменить exe файл на новый, все настройки сохранятся (если обратное не указано в сведении о новой версии) 
<br>

![Снимок экрана 2025-02-21 001827](https://github.com/user-attachments/assets/8ed7cbc6-779f-4c44-bbec-a7e77492f784)

## Возможности приложения:
+ поиск и отображение устройств в локальной сети
  + с  установленной библиотекой  **Settings AlexGyver**
  + устройств с **WLED**
  + **Home Assistant**
  + добавление веб-интерфейсов устройств вручную
    - можно добавить сайт, надпример alexgyver.ru и добавить его как устройство
+ может сохранить учетные данные для доступа к устройству если используется ddns от кинетик
+ удобное переключение между устройствами
+ возможность переименовать устройства
+ если устройство недоступно покажет плашку и будет проверять доступность раз в 5 секунд
+ автоматическое определение цветов рамки и шапки
  -  в Settings цвета зависят от выбранного цвета акцента (см. документацию на сеттингс) ``` sett.config.theme = sets::Colors::Violet;```
  -  во Wled зависят от выбранной темы
  -  для всех остальных определаются в зависимости от стилей на странице
  -  полезно когда надо быстрее отличать похожие устройства
  -  цвет можно назначит индивидуально для каждого устройтсва
+ можно установить поверх всех окон
+ что-то там еще умеет тоже, смотри изменения в [версиях  ↓](#relise)
  
после запуска программа создаст в той же папке где находится<br>
+ папки кеша и данных браузера
+ после сканирования файл discovered_devices.json куда записываются имена и ip адреса найденных устройств<br> после создания файла в контекстном меню и выпадабщем списке адреса устройства будет доступен выбор найденных устройств
+ settings.json где хранятся настройки
+ subnet_history.json куда записываются все найденые подсети
<br> 


```
/* ДИСКЛЕЙМЕР */
Я не программист, любитель, питон знаю плохо
Программа написана не без помощи искусственных мозгов
Найдете баг - пишите, постараюсь исправить. 
/* КОНЕЦ ДИСКЛЕЙМЕРА */
```
<br>

## Безопасность:
  + При скачивании exe, браузер может сказать что файл скачивается редко и не сохранит файл.
    + нужно нажать ... (три точки) и нажать сохранить, резвернуть ^ и нажать всеравно сохранить
    + либо собрать exe самому (инструкция ниже)
  + При первом старте если включен защитник, система предупредит о неопознаном издателе, нужно нажать дополнительно -> выполнить в любом случае, ну или собирать exe самостоятельно<br>
  + В некоторых случаях, windows defender (а может и другие антивирусы) помечают скачанный exe, как троян<br>
    Это происходит, потму что у программы нет цифровой подписи, дефендеру неизвестен ни издатель ни сама программа, и для перестраховки помечает как вирус.</br>
    
    + вирусов никаких там естественно нет, и стоит разрешить и добавить в исключения 
    - но если вы, благоразумно не доверяете exe файлам из интернета, то есть ряд возможностей
        - самый простой - проверить исходник, файл Settings.py соответствует последнему релизу</br>
          если вы не знаете пайтон, или не хочется разбираться, всегда можно закинуть файл в нейросеть и спросить ее (из за размера примут не все, но например grok, должен.
        - либо же, проверив исходник - собрать exe самому, это не сложно, ниже есть инструкция.
  + если вы открыли доступ к своему устройству через интернет с использованием ddns на роутере кинетик, то есть возможность сохранить пароль
    - пароль сохраняется  в файл settings.json 
    -  пароль кодируется но не шифруется 
    -  не используйте пароль и логин от админа, при создании доменного имени задайте уникального пользователя


<h2 id="relise"  > Версии </h2>

ссылка на последнюю версию программы (собранный exe) [RSM.exe](https://github.com/TonTon-Macout/APP-for-AlexGyver-Settings/releases/latest/download/RSM.exe)<br> <br> 
+ v1.0.0
  - **Маленькое но очень важное обновление!** 
  -    ребята из qt, исправили баг с паразитным окном на фоне , после разворачивания из свернутого состояния 
       теперь мы избавились от бесящего и мозолящего глаза заголовка окна на фоне! 
+ v.0.6.0
  - много мелких обновлений исправлений, еще больше незаметных
    - улучшил внешний вид, добавил функциональности
    - добавил поиск Home Assistant в локальной сети
    - теперь можно добавлять любой веб интерфейс вручную
      - Все в одной программе! Settings, Wled, Home Assistant, Что-то самописное, Яндекс, Гугл, alexgyver.ru! 
    - Улучшена работа с автоопределением цветов
      - тепрь будут определяться цвета для всех устройств
    - EXE теперь собран со всеми иконками внутри, папка с иконками больше не нужна 
    - ...
+ v.0.3.1
  - поработал над внешним видом и кастомизацией
    - теперь есть возможность отдельно назначать цвет шапки и цвет подвала
    - теперь можно назначить свои цвета не только всем устройствам но и каждому устройству в отдельности
      - чекбокс "только для этого устройства", активирует применение своих цветов и записывает их в settings.json
      - назначенные цвета применятся только к этому устройству
    -  чек бокс "свои цвета для всех" по прежнему применяет одни и те же глобальные цвета для всех устройств
    -  теперь можно отображать имена устройств не только в адресной строке но и на кнопке в панеле задач
    -  если с устройством с Settings потерялась связь, начнет плавно мигать индикатор на кнопке поиск устройств
    -  некоторые другие фишечки и улучшения 
+ v.0.2.7
  - если вы открыли доступ к своему устройству из сети интернет, теперь можно добавить и его
    - в файле discovered_devices.json теперь хранятся не ip а url
    - если вы обновили заменой exe файла и остался discovered_devices.json старой версии, то  при старте программы, он будет сконвертирован в новую 
    - если используется сервис ddns на роутере кинетик, то есть возможность сохранить пароль
      - пароль сохраняется  в файл settings.json 
      -  пароль кодируется но не шифруется 
      -  не используйте пароль и логин от админа, при создании доменного имени задайте уникального пользователя
  - переработал окно сканирования, должно стать юзабельней
  - таймаут в окне сканирования, записывается в файл settings.json  
     - теперь он влияет еще и на таймаут ответа устройства когда оно недоступно
  -  при первом старте или когда нет добавленных устройств, теперь вместо ip по умолчанию, которое вряд ли совпало бы с вашим, показывается заглушка
  -  еще некоторые изменения
+ v.0.2.1
  - накинул немного акцентных цветов в интерфейсе, обновил и добавил новые иконки, теперь должно смотреться симпотней
  - если на гитхабе есть новая версия, в контекстном меню появится пункт ведущий на страницу релиза
  - за правый нижний угол можно изменить размер
  - в окне сканирования теперь можно изменить найденные устройства или добавить новое вручную
+ v0.2.0
  - добавил поиск устройств с WLED
    -  по умолчанию поиск включен, можно отключить в настройках 
  - добавил в настройки установку акцентного цвета по умолчанию 
    - если на загруженной странице не нашелся акцентный цвет, например если это WLED, то цвета будут применяться из настроек по умолчанию 
    - так же добавил галку "свои цвета всегда", при активации которой цвета рамки и фона всегда будут применяться из настроек 
  -  еще некотрые мелкие улучшения
+ v0.1.0
  - добавлен пункт настройки в контекстное меню
  - исправлен размер окна на небольших экранах
    -  теперь размер окна зависит от разрешения экрана
    - если все же вам не нравится предложенный размер и масштаб, его можно изменить в настройках
  - исправлены цвета
    - если включена светлая тема то некоторые поля были не видны (исправлено) 
    - добавлено применение акцентного цвета  к некоторым частям интерфейса 
  - обновлена логика определения маски подсети
    - теперь она должна определяться правильно, даже если вы послали ркн на три всем известные буквы 
    - также добавлен выпадающий список со всеми найденными сетями
  - добавлен список устройств в выпадающем списке в строке адреса 
    - в списке отображаются все найденные устройства по клику переходим на него
    - можно переключить что показывать в этом списке и строке адреса, имя устройства или адрес (в настройках) 
  - упразднен файл last_url.txt 
    - теперь последнее устройство всегда первое в списке discovered_devices.json 

+ v0.08 
  + больше не крашится если ввести неверную маску подсети
  + цвет фона в приложении зависит от цвета фона в веб интерфейсе, теперь будет лучше смотреться в светлой теме и в кастомной 
+ v0.07 
  + добавил автоопределение локальной подсети
<br>

## Известные ~~баги~~ ~~фичи~~ особенности 

+ пофикшено в версии 1.0.0 ~~если скрыть приложение и развернуть, появляется строка с заголовком винды на фоне приложения~~
+ наверно есть и чтото еще, но я об этом не вкурсе
<br>
<h2 id="compiler">Запуск и сборка exe файла</h2>


+ для запуска скрипта или сборки exe файла необходим [python](https://www.python.org/downloads/), я тестировал на версии 3.13 
+ кириллицы в пути лучше избегать
+ теперь последняя версия скрипта всегда всегда будет иметь имя  Settings_app.py, для удобства сборки
+ для ручной сборки или запуска скрипта
  + если нет python'а - установить 3.7+, затем установить библиотеки - открыть терминал -> скопировать команду -> ентер
  + после установки python, перейти в папку где расположен скрипт 
  + правкой кнопкой на пустом месте -> открыть в терминале -> скопировать команду -> энтер

  
установить упаковщик python скриптов <br>
```pip install pyinstaller```

установить библиотеки<br>
```pip install pyinstaller PyQt6 PyQt6-WebEngine psutil requests beautifulsoup4 urllib3 lxml```

запуск скрипта<br>
```python Settings_app.py```

сборка exe --- иконки должна лежать в той же папке где и скрипт<br>
```pyinstaller --onefile --windowed --icon=icon.ico Settings_app.py```

собирётся экзешник в папке dist, 
рядом с exe в ту же папку нужно положить все файлы иконок <br>

если все библиотеки установлены 
можно запустить с помощью батника start.bat он выполняет ```python Settings_app.py``` 
собрать exe с помощью батника build_exe.bat - он проверит наличие всех необходимых иконок и если ему все понравится скомпилирует exe файл и удалит временные файлы 



## 
![Снимок экрана 2025-03-13 152329](https://github.com/user-attachments/assets/5d352196-2561-4bf5-a6b8-fba412e92d0f)
![Снимок экрана 2025-03-05 010612](https://github.com/user-attachments/assets/e71e5cc5-4f01-4222-a0e7-28040ea85a1f)

